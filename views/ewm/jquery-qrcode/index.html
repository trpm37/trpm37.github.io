<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=no" />
    <meta name="Keywords" content="生成二维码 jquery.qrcode" >
    <meta name="Description" content="生成二维码 jquery.qrcode">
    <meta name="apple-mobile-web-app-title" content="生成二维码 jquery.qrcode">
    <title>生成二维码 jquery.qrcode</title>
    <script type="text/javascript" src="../../public/js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/jquery.qrcode.min.js"></script>
    <style>
        body{margin:0;padding:0;color: #333;font-size: 14px;font-family: "微软雅黑";background-color: #fff;}
        .ewmD{display: inline-block;margin: 20px;float: left;}
        .ewmD .title{color: blue;}
        .ewmD .ewm{}
         /*说明*/
        .shuomingBtn{position: fixed;right: 10px;top: 10px;z-index: 100;padding: 6px 20px;color: #fff;background-color: #EE7701;border-radius: 5px;}
        .shuoming{display: none; position: fixed;left: 0;top: 0;z-index: 100;width: 100%;height: 100%;padding-left: 20px;padding-top: 20px;background-color: rgba(0,0,0,0.5);}
        .shuoming .bk{position: fixed;left: 0;top: 0;z-index: 1;width: 100%;height: 100%;background-color: rgba(0,0,0,0.5);}
        .shuoming .mc{position: relative;z-index: 2; width: 80%;height: 90%;margin-left: 5%;margin-top: 5%;padding: 10px;box-sizing:border-box; background-color: #fff;}
        .shuoming .h{color: #EE7701;font-size: 20px;}
        .shuoming .a{display: block;margin-top: 20px;color: #78afd3;word-wrap:break-word;}
    </style>
  </head>
  <body>
    <div class="mainBox">
        <div class="ewmD" id="qrcode1">
            <div class="title">默认render: "canvas"</div>
            <div class="ewm"></div>
        </div>

        <div class="ewmD" id="qrcode2">
            <div class="title">render: "table"</div>
            <div class="ewm"></div>
        </div>

        <div class="ewmD" id="qrcode3">
            <div class="title">render: "canvas"</div>
            <div class="ewm"></div>
        </div>

        <div class="ewmD" id="qrcode4">
            <div class="title">设置宽高</div>
            <div class="ewm"></div>
        </div>

        <div class="ewmD" id="qrcode5">
            <div class="title">设置颜色</div>
            <div class="ewm"></div>
        </div>

        <div class="ewmD" id="qrcode6">
            <div class="title">二维码中间带图片</div>
            <div class="ewm"></div>
        </div>

        <div class="ewmD" id="qrcode8">
            <div class="title">生成图片</div>
            <div class="ewm"></div>
            <div class="img">我是图片：<img src="" alt=""></div>
        </div>

        <div class="ewmD" id="qrcode9">
            <div class="title">中文域名</div>
            <div class="ewm"></div>
        </div>

        <!-- 说明 -->
        <div class="shuomingBtn">说明</div>
        <div class="shuoming">
            <div class="bk"></div>
            <div class="mc">
                <div class="h">可参考以下</div>
                <a class="a" href="http://www.jq22.com/jquery-info294" target="_blank">http://www.jq22.com/jquery-info294</a>
            </div>
        </div>
    </div>
    <script type="text/javascript" charset="utf-8">
        var moudle_page={
            data: {
                flagObj: null, //设备
                window_w: $(window).innerWidth(),
                window_h: $(window).innerHeight(),
                z_index: 10
            },
            //初始化
            init: function(){
                var _this=this;
                _this.data.flagObj=_this.navigator_userAgent();

                $('#qrcode1 .ewm').qrcode("http://www.jq22.com");

                $('#qrcode2 .ewm').qrcode({
                    render: "table",
                    text: "http://www.jq22.com"
                });

                $('#qrcode3 .ewm').qrcode({
                    render: "canvas",
                    text: "http://www.jq22.com"
                });

                $('#qrcode4 .ewm').qrcode({
                    render: "canvas",
                    text: "http://www.jq22.com",
                    width: 100,
                    height: 100
                });

                $('#qrcode5 .ewm').qrcode({
                    render: "canvas",
                    text: "http://www.jq22.com",
                    foreground: "#C00",
                    background: "#FFF"
                });

                $('#qrcode6 .ewm').qrcode({
                    render: "canvas",
                    text: "http://www.jq22.com",
                    src: "../../public/img/me.png"
                });

                $('#qrcode8 .ewm').qrcode({
                    render: "canvas",
                    text: "http://www.jq22.com"
                });
                setTimeout(function(){
                    _this.drawImage();
                }, 1000);

                $('#qrcode9 .ewm').qrcode({
                    render: "canvas",
                    text: encodeURI("http://中文")
                });



                //说明
                $(".shuomingBtn").on("click",function(event) {
                    $(".shuoming").show();
                });
                $(".shuoming").on("click",".bk",function(event) {
                    $(".shuoming").hide();
                });
            },
            //判断设备
            navigator_userAgent: function() {
                var userAgentInfo = navigator.userAgent;
                var flagObj={"isMobile":false,"isAndroid":false,"isApple":false};
                var agents = ["Android", "iPhone","SymbianOS", "Windows Phone","iPad", "iPod"];
                for (var v = 0; v < agents.length; v++) {
                    if (userAgentInfo.indexOf(agents[v]) > 0) {
                        flagObj.isMobile=true;
                        break;
                    }
                }
                if (userAgentInfo.indexOf("Android") > 0) {
                    flagObj.isAndroid=true;
                }
                if (userAgentInfo.indexOf("iPhone") > 0||userAgentInfo.indexOf("iPad") > 0||userAgentInfo.indexOf("iPod") > 0) {
                    flagObj.isApple=true;
                }
                return flagObj;
            },
            //生成图片
            drawImage: function() {
                // var canvas=document.getElementById("canvas");
                var canvas = $('#qrcode8 .ewm canvas').get(0);
                // var context=canvas.getContext("2d");
                var base64 = canvas.toDataURL('image/jpeg', 1.0);
                $("#qrcode8 .img img").attr("src",base64);
            }
        }

		$(function(){
			//初始化
			moudle_page.init();
		})

        $(window).resize(function() {
            moudle_page.data.window_w=$(window).innerWidth();
            moudle_page.data.window_h=$(window).innerHeight();
        });
	</script>
  </body>
</html>